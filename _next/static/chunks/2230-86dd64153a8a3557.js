"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2230],{32230:function(e,t,i){i.d(t,{V:function(){return W}});var n=i(57135),l=i(72006),r=i(4405),o=i(80564),a=i(96583),c=i(16704),s=i(59496),d=i(13068),u=i(31286),v=i(34331),p=i(80029),h=i(67313),f=i(74854),m=i(90174),Z=i(3094),y=i(4834),g=i(13813),x=i(37788),k=i(98429),b=i(12775),A=i(26807),N=i(27338),C=i(69716),F=i.n(C),B=i(13913),w=i(74637),_=i.n(w),H=i(95061),M=i(32575),X=i(54235),z=i(33279),I=i(37566),T=i(43422),O=i(47296),R=i(62697),S=i(49739),Y=i(27939),K=i(70464),P=i(39687),E=i(88403),q=i(98502),D=i(46964),G=(0,u.k)((function(e){return{root:{".filter":{cursor:"pointer",color:"rgba(255, 255, 255, 0.3)","&.activity":{color:"rgba(255, 255, 255, 1)"}},".small-text":{fontSize:12,lineHeight:"18px",color:e.other.colors.Gray1}}}}));function W(e){var t,i,n,l,r,o,a,c,s,d,u,v,p,h,f,m,Z,y,g,x=e.contract,k=null===e||void 0===e||null===(t=e.token)||void 0===t?void 0:t.tokenId,b=null===e||void 0===e||null===(i=e.token)||void 0===i?void 0:i.tokenName,A=null===(n=e.collection)||void 0===n?void 0:n.collectionName,N="",C=(null===(l=e.token)||void 0===l?void 0:l.tokenImage)||(null===(r=e.collection)||void 0===r?void 0:r.collectionImage),F=b||k,B=A,w=(0,Y.SA)(e);["collection","attribute"].indexOf(null===e||void 0===e||null===(o=e.order)||void 0===o||null===(a=o.criteria)||void 0===a?void 0:a.kind)>-1&&(N=[null===e||void 0===e||null===(c=e.order)||void 0===c||null===(s=c.criteria)||void 0===s||null===(d=s.data)||void 0===d||null===(u=d.attribute)||void 0===u?void 0:u.key,null===e||void 0===e||null===(v=e.order)||void 0===v||null===(p=v.criteria)||void 0===p||null===(h=p.data)||void 0===h||null===(f=h.attribute)||void 0===f?void 0:f.value].filter(Boolean).join(": "),C=null===e||void 0===e||null===(m=e.order)||void 0===m||null===(Z=m.criteria)||void 0===Z||null===(y=Z.data)||void 0===y||null===(g=y.collection)||void 0===g?void 0:g.image,F=A,B=N);return{contract:x,tokenId:k,tokenName:b,collectionName:A,collectionAttribute:N,image:C,firstName:F,secondName:B,rarityRank:w}}var V=function(e){e=null!==e?e:(0,o.Z)(new TypeError("Cannot destructure undefined"));var t,i=function(){J.setActivitiesType([]),le()},u=G(),C=u.classes,w=u.cx,Y=(0,d.$G)().t,V=(0,X.oR)().god,j=((0,D.q)("md",!0),(0,s.useMemo)((function(){return[{accessorKey:"name.firstName",title:Y("translation.activity.event"),width:130,render:function(e,t,i){var n,l,r=null===t||void 0===t||null===(n=t.order)||void 0===n||null===(l=n.source)||void 0===l?void 0:l.icon;return(0,c.BX)(v.Z,{className:"activity-type",spacing:6,children:[r?(0,c.tZ)(p.E,{src:r,width:16,height:16}):s.createElement(T.r8[t.eventType]||T.r8[t.type]||T.r8.default,{size:20,style:{flexShrink:0}}),(0,c.BX)("div",{className:"tag-type-group",children:[(0,c.tZ)(h.x,{size:"sm",sx:{color:b.ZP.White1},children:Y(T.Fu[t.eventType]||T.Fu[t.type]||T.Fu.default)}),(0,c.tZ)(h.x,{className:"small-text",size:"xs",children:Y("assets.fixed_price")})]})]})}},{title:Y("translation.activity.item"),width:200,skeleton:(0,c.tZ)(c.HY,{children:(0,c.BX)(v.Z,{spacing:8,children:[(0,c.tZ)(f.O,{height:40,width:40}),(0,c.BX)(m.K,{children:[(0,c.tZ)(f.O,{height:10,width:100}),(0,c.tZ)(f.O,{height:10,width:50})]})]})}),render:function(e,t,i){var n=W(t),l=n.image,r=n.contract,o=n.tokenId,a=n.firstName,s=n.secondName;return(0,c.tZ)(Z.x,{component:o?F():"span",passHref:!0,href:A.q.assetDetail(r,o),children:(0,c.tZ)("a",{children:(0,c.BX)(v.Z,{noWrap:!0,children:[(0,c.tZ)(N.Z,{size:40,src:l,radius:4,contract:r,tokenId:o}),(0,c.BX)(m.K,{spacing:0,children:[(0,c.tZ)(h.x,{lineClamp:1,style:{wordBreak:"break-all"},children:a}),(0,c.tZ)(h.x,{className:"small-text",lineClamp:1,children:s})]})]})})})}},{accessorKey:"token.rarityRank",title:Y("assets.rarity"),render:function(e,t,i){return e<100?(0,c.tZ)(c.HY,{children:(0,c.tZ)(K.Z,{children:e||"-"})}):e||"-"}},{title:Y("translation.activity.price"),render:function(e,t,i){var n,l,r,o,a,s,d,u;return(null===(n=t.price)||void 0===n||null===(l=n.amount)||void 0===l?void 0:l.decimal)?(0,c.BX)(m.K,{spacing:0,children:[(0,c.tZ)(z.Z,{value:null===(r=t.price)||void 0===r||null===(o=r.amount)||void 0===o?void 0:o.decimal,iconPosition:"right",coin:null===(a=t.price)||void 0===a||null===(s=a.currency)||void 0===s?void 0:s.symbol}),(0,c.BX)("span",{className:"small-text",children:["(",(0,c.tZ)(I.Z,{size:"xs",coin:"usd",value:null===(d=t.price)||void 0===d||null===(u=d.amount)||void 0===u?void 0:u.usd}),")"]})]}):"-"}},{title:Y("translation.activity.from"),render:function(e,t,i){return t.fromAddress?(0,c.tZ)(F(),{href:A.q.AccountProfile(null===t||void 0===t?void 0:t.fromAddress),passHref:!0,children:(0,c.tZ)(Z.x,{component:"a",children:(0,B.sC)(t.fromAddress)})}):"-"}},{title:Y("translation.activity.to"),render:function(e,t,i){return t.toAddress?(0,c.tZ)(F(),{href:A.q.AccountProfile(null===t||void 0===t?void 0:t.toAddress),passHref:!0,children:(0,c.tZ)(Z.x,{component:"a",children:(0,B.sC)(t.toAddress)})}):"-"}},{title:Y("translation.activity.time"),render:function(e,t,i){return(0,c.tZ)("div",{style:{wordBreak:"break-word"},children:t.createdAt?_()(t.createdAt).format("YYYY/MM/DD HH:mm"):"-"})}},{accessorKey:"operation",title:"",width:70,render:function(e,t,i){return(0,c.tZ)(v.Z,{children:t.txHash&&(0,c.tZ)(H.Z,{onOpen:function(e){return(0,M.WR)(V.pageChainId.value||q.R.id,t.txHash,e)},type:"tx"})})}}]}),[Y])),L=[{value:"sale",label:Y("assets.sale")},{value:"mint",label:Y("assets.mint")},{value:"ask",label:Y("assets.list")},{value:"ask_cancel",label:Y("assets.list_cancel")},{value:"bid",label:Y("assets.make_offer")},{value:"bid_cancel",label:Y("assets.cancel_offer")},{value:"transfer",label:Y("assets.transfer")}],$=(0,E.useRouter)().isFallback,J=(0,S.Y)(),Q=J.collectionId,U=(0,O.Z)(function(){var e=(0,n.Z)((function(e){var t,i,n,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return i=null===e||void 0===e?void 0:e.continuation,Q?[4,R.Z.getReservoirAPIClient(J.chain).getCollectionsActivityV6({collection:Q,includeMetadata:!0,sortBy:"createdAt",types:J.activitiesFilter.types,continuation:i})]:[2,{list:[]}];case 1:return n=a.sent(),[2,{list:null!==(o=null===(t=n.data.activities)||void 0===t?void 0:t.map((function(e){return(0,r.Z)((0,l.Z)({},e),{eventTimestamp:e.timestamp?1e3*e.timestamp:void 0,fromAddress:e.fromAddress,toAddress:e.toAddress,token:e.token,eventType:e.type,price:e.price})})))&&void 0!==o?o:[],continuation:n.data.continuation}]}}))}));return function(t){return e.apply(this,arguments)}}(),{isNoMore:function(e){return!(!e||e.continuation)},reloadDeps:[Q,J.activitiesFilter.types]}),ee=U.data,te=U.loading,ie=(U.loadingMore,U.loadMore),ne=U.noMore,le=U.reload,re={root:{height:32,padding:12,lineHeight:"20px",background:"#1F1F1F",color:"rgba(255, 255, 255, 1)"}},oe=(0,s.useMemo)((function(){return L.filter((function(e){var t;return(null===(t=J.activitiesFilter.types)||void 0===t?void 0:t.indexOf(e.value))>-1}))}),[J.activitiesFilter.types,L]);return(0,c.BX)(Z.x,{pt:20,className:C.root,children:[(0,c.tZ)(v.Z,{position:"apart",spacing:8,pb:10,sx:{fontSize:14},children:(0,c.BX)(v.Z,{spacing:8,children:[(0,c.tZ)(y.C,{className:w("filter",{activity:0===J.activitiesFilter.types.length}),styles:{root:(0,r.Z)((0,l.Z)({},re.root),{inner:{textTransform:"none"}})},onClick:i,children:Y("translation.activity.all")}),L.map((function(e){return(0,c.tZ)(y.C,{className:w("filter",{activity:J.activitiesFilter.types.indexOf(e.value)>-1}),styles:(0,r.Z)((0,l.Z)({},re),{inner:{textTransform:"none"}}),onClick:function(){return function(e){var t=J.activitiesFilter.types,i=t.indexOf(e.value);i>-1?t.splice(i,1):t.push(e.value),J.setActivitiesType(t),le()}(e)},children:e.label},e.value)})),(0,c.tZ)(Z.x,{sx:{color:"#7B61FF",cursor:"pointer"},hidden:!oe.length,onClick:i,children:Y("collection.filter_input_clear")})]})}),(0,c.tZ)(P.Z,{dataLength:(null===ee||void 0===ee||null===(t=ee.list)||void 0===t?void 0:t.length)||0,next:ie,hasMore:!ne&&!te,loader:(0,c.tZ)(g.M,{sx:{flex:1},pb:40,pt:20,children:(0,c.tZ)(x.a,{size:"lg",variant:"dots"})}),children:(0,c.tZ)(k.Z,{smallScreenColumnNum:2,loading:te||$,columns:j,data:(null===ee||void 0===ee?void 0:ee.list)||[],verticalSpacing:12,styles:{header:{fontSize:12,lineHeight:"16px",padding:"0 8px"},th:{color:b.ZP.Gray1},tr:{padding:"0 8px","&:hover":{background:"#141414",borderRadius:4}}}})})]})};t.Z=(0,s.memo)(V)}}]);